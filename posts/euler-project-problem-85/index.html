<!DOCTYPE html>
<html lang="en">
    
    


    <head>
    <link href="https://gmpg.org/xfn/11" rel="profile">
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta http-equiv="Cache-Control" content="public" />
<!-- Enable responsiveness on mobile devices -->
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
<meta name="generator" content="Hugo 0.75.1" />

    
    
    

<title>Euler Project Problem 85 using Python • Mingxuan Yang</title>


<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Euler Project Problem 85 using Python"/>
<meta name="twitter:description" content="Euler Project Problem 85: Counting rectangles."/>

<meta property="og:title" content="Euler Project Problem 85 using Python" />
<meta property="og:description" content="Euler Project Problem 85: Counting rectangles." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://Mingxuan-Yang.github.io/posts/euler-project-problem-85/" />
<meta property="article:published_time" content="2020-09-09T00:00:00+00:00" />
<meta property="article:modified_time" content="2020-09-09T00:00:00+00:00" /><meta property="og:site_name" content="website" />


    


<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">








<link rel="stylesheet" href="/scss/hyde-hyde.71157e768c4e111a23c3531b95e0cbb59bbef3c9e6901d36247cb53d6b6be258.css" integrity="sha256-cRV&#43;doxOERojw1MbleDLtZu&#43;88nmkB02JHy1PWtr4lg=">


<link rel="stylesheet" href="/scss/print.2744dcbf8a0b2e74f8a50e4b34e5f441be7cf93cc7de27029121c6a09f9e77bc.css" integrity="sha256-J0Tcv4oLLnT4pQ5LNOX0Qb58&#43;TzH3icCkSHGoJ&#43;ed7w=" media="print">



    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
    <!-- Icons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/apple-touch-icon-144-precomposed.png">
    <link rel="shortcut icon" href="/favicon.png">
    
    

</head>


    <body class=" ">
    
<div class="sidebar">
  <div class="container ">
    <div class="sidebar-about">
      <span class="site__title">
        <a href="https://Mingxuan-Yang.github.io/">Mingxuan Yang</a>
      </span>
      
        
        
        
        <div class="author-image">
          <img src="https://Mingxuan-Yang.github.io/img/photo.png" alt="Author Image" class="img--circle img--headshot element--center">
        </div>
        
      
      
      <p class="site__description">
        
      </p>
    </div>
    <div class="collapsible-menu">
      <input type="checkbox" id="menuToggle">
      <label for="menuToggle">Mingxuan Yang</label>
      <div class="menu-content">
        <div>
	<ul class="sidebar-nav">
		 
		 
			 
				<li>
					<a href="/posts/">
						<span>Posts</span>
					</a>
				</li>
			 
		 
			 
				<li>
					<a href="/about/">
						<span>About</span>
					</a>
				</li>
			 
		
	</ul>
</div>

        <section class="social">
	
	
	
	<a href="https://github.com/Mingxuan-Yang" rel="me"><i class="fab fa-github fa-lg" aria-hidden="true"></i></a>
	
	
	
	
	
	
	
	<a href="https://linkedin.com/in/mingxuan-yang-9468391a1" rel="me"><i class="fab fa-linkedin fa-lg" aria-hidden="true"></i></a>
	
	
	
	
	
	
	
	
	
	<a href="mailto:mingxuan.yang@duke.edu" rel="me"><i class="fas fa-at fa-lg" aria-hidden="true"></i></a>
	
</section>

      </div>
    </div>
    


  </div>
</div>

        <div class="content container">
            
    
<article>
  <header>
    <h1>Euler Project Problem 85 using Python</h1>
    
    
<div class="post__meta">
    
    
      <i class="fas fa-calendar-alt"></i> Sep 9, 2020
    
    
    
      
      
          in
          
          
              <a class="badge badge-category" href="/categories/python">PYTHON</a>
              
          
      
    
    
    
      
      
          <br/>
           <i class="fas fa-tags"></i>
          
          <a class="badge badge-tag" href="/tags/euler-project">euler project</a>
           
      
          <a class="badge badge-tag" href="/tags/geometry">geometry</a>
          
      
    
    
    <br/>
    <i class="fas fa-clock"></i> 4 min read
</div>


  </header>
  
  
  <div class="post">
    <h2 id="problem">Problem</h2>
<p><strong>Problem 85: Counting rectangles</strong></p>
<p>By counting carefully it can be seen that a rectangular grid measuring 3 by 2 contains eighteen rectangles:</p>
<p><img src="/img/counting_rectangles.png" alt="error"></p>
<p>Although there exists no rectangular grid that contains exactly two million rectangles, find the area of the grid with the nearest solution.</p>
<h2 id="analysis">Analysis</h2>
<p>First of all, we need to specify the number of possible rectangles when the width and length of the grid are x units and y units. Let&rsquo;s try to get some inspirations by setting y to 1, which will turn the corresponding question into a one-dimensional case.</p>
<table>
<thead>
<tr>
<th>Grid</th>
<th>rectangles</th>
<th>total</th>
</tr>
</thead>
<tbody>
<tr>
<td>1×1</td>
<td>1</td>
<td>1</td>
</tr>
<tr>
<td>2×1</td>
<td>1+2</td>
<td>3</td>
</tr>
<tr>
<td>3×1</td>
<td>1+2+3</td>
<td>6</td>
</tr>
<tr>
<td>4×1</td>
<td>1+2+3+4</td>
<td>10</td>
</tr>
<tr>
<td>5×1</td>
<td>1+2+3+4+5</td>
<td>15</td>
</tr>
<tr>
<td>&hellip;</td>
<td>&hellip;</td>
<td>&hellip;</td>
</tr>
</tbody>
</table>
<p>Thus the number of possible rectangles with grid x × 1 is x(x+1)/2. The same pattern can be applied to the 2-dimensional case. Therefore, the number of possible rectangles with grid x × y is the product of x(x+1)/2 and y(y+1)/2, which lead to x(x+1)y(y+1)/4. Then the problem becomes what is the value of x × y when x(x+1)y(y+1)/4 is closest to 2,000,000.</p>
<p>The result can be obtained through traversal. To lower the time cost, we need to find out the maximum width and maximum length of the possible grids if not assigned. Implicitly, the length y is larger than the width x, so the maximum x value can be equal y. In this condition, we have the equation:</p>
<p>x(x+1)x(x+1)/4 = 2,000,000</p>
<p>By solving it approximately, the maximum width should be ⌈(4×2,000,000)^(1/4)⌉, where ⌈x⌉ is the ceiling of x.</p>
<p>Then let&rsquo;s turn to the maximum length of the possible grids. According to the formula, when x is set to be 1, y will reach its maximum. By solving the equation:</p>
<p>y(y+1)×2/4 = 2,000,000</p>
<p>We know that ⌈(2×2,000,000)^(1/2)⌉ is the maximum length.</p>
<p>Therefore, after calculating all possibilities through looping, where x is from 1 to ⌈(4×2,000,000)^(1/4)⌉, y is from x to ⌈(2×2,000,000)^(1/2)⌉, we will get the desired result.</p>
<h2 id="solution">Solution</h2>
<p>According to the analysis, a function can be constructed using Python to solve the generalized problem. The parameter in the self-built function is <code>target</code>, which is the target number of possible rectangles, and <code>max_width</code> and <code>max_length</code>, which are defaulted to be None. To get the result of <a href="https://projecteuler.net/archives">Euler Project</a> <a href="https://projecteuler.net/problem=85">Problem 85</a>, we should set <code>target</code> to be 2,000,000. The function and the corresponding annotation are shown below.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#66d9ef">def</span> <span style="color:#a6e22e">counting</span>(target, max_width <span style="color:#f92672">=</span> None, max_length <span style="color:#f92672">=</span> None):
    <span style="color:#e6db74">&#34;&#34;&#34;Return the area of the grid with the nearest number of possible rectangles compared 
</span><span style="color:#e6db74">    with `target`.
</span><span style="color:#e6db74">    
</span><span style="color:#e6db74">    The sides of the grid and the possible rectangles are integers that are equal or greater 
</span><span style="color:#e6db74">    than 1. If there exists a grid which contains exactly `target` number of rectangles, the 
</span><span style="color:#e6db74">    corresponding area will be the returning result. Otherwise, the area of the grid 
</span><span style="color:#e6db74">    containing the closest number will be returned.
</span><span style="color:#e6db74">    
</span><span style="color:#e6db74">    Parameters
</span><span style="color:#e6db74">    ----------
</span><span style="color:#e6db74">    target : int
</span><span style="color:#e6db74">        The desired number of possible rectangles. It should be positive. If no grid has 
</span><span style="color:#e6db74">        exactly `target` number of rectangles, the grid containing the closest number will 
</span><span style="color:#e6db74">        be applied.
</span><span style="color:#e6db74">        
</span><span style="color:#e6db74">    max_width : int, optional
</span><span style="color:#e6db74">        The maximum width of the resulting grid. It should be positive. If `max_width` is not 
</span><span style="color:#e6db74">        given, the value ⌈(4n)^(1/4)⌉, where n is the value of 
</span><span style="color:#e6db74">        `target`, will be employed based on the following formula.
</span><span style="color:#e6db74">        
</span><span style="color:#e6db74">            n = x(x + 1)y(y + 1)/4
</span><span style="color:#e6db74">        
</span><span style="color:#e6db74">        Here x and y represent the width and length of the grid. y is implicitly larger 
</span><span style="color:#e6db74">        than x. Therefore, the maximum value of x is equal to y. After calculation, it 
</span><span style="color:#e6db74">        should be approximately ⌈(4n)^(1/4)⌉.
</span><span style="color:#e6db74">        
</span><span style="color:#e6db74">    max_length : int, optional
</span><span style="color:#e6db74">        The maximum length of the resulting grid. It should be positive. If `max_length` is 
</span><span style="color:#e6db74">        not given, the value ⌈(2n)^(1/2)⌉, where n is the value of 
</span><span style="color:#e6db74">        `target`, will be employed based on the following formula.
</span><span style="color:#e6db74">        
</span><span style="color:#e6db74">            n = x(x + 1)y(y + 1)/4
</span><span style="color:#e6db74">        
</span><span style="color:#e6db74">        Here x and y represent the width and length of the grid. y is implicitly larger 
</span><span style="color:#e6db74">        than x. When x is equal to 1, y will reach its maximum value. After calculation, 
</span><span style="color:#e6db74">        it should be approximately ⌈(2n)^(1/2)⌉.
</span><span style="color:#e6db74">        
</span><span style="color:#e6db74">    Returns
</span><span style="color:#e6db74">    -------
</span><span style="color:#e6db74">    int
</span><span style="color:#e6db74">        The area of the grid which has the nearest number of possible rectangles compared 
</span><span style="color:#e6db74">        with `target`.
</span><span style="color:#e6db74">        
</span><span style="color:#e6db74">    Examples
</span><span style="color:#e6db74">    --------
</span><span style="color:#e6db74">    The area of the grid with almost two millions number of possible rectangles.
</span><span style="color:#e6db74">
</span><span style="color:#e6db74">    &gt;&gt;&gt; counting(2000000)
</span><span style="color:#e6db74">    2772
</span><span style="color:#e6db74">    &#34;&#34;&#34;</span>
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> max_width:
        max_width <span style="color:#f92672">=</span> int((<span style="color:#ae81ff">4</span><span style="color:#f92672">*</span>target)<span style="color:#f92672">**</span>(<span style="color:#ae81ff">1</span><span style="color:#f92672">/</span><span style="color:#ae81ff">4</span>) <span style="color:#f92672">//</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>)
    <span style="color:#66d9ef">if</span> <span style="color:#f92672">not</span> max_length:
        max_length <span style="color:#f92672">=</span> int((<span style="color:#ae81ff">2</span><span style="color:#f92672">*</span>target)<span style="color:#f92672">**</span>(<span style="color:#ae81ff">1</span><span style="color:#f92672">/</span><span style="color:#ae81ff">2</span>) <span style="color:#f92672">//</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>)
    diff_min <span style="color:#f92672">=</span> target
    
    <span style="color:#66d9ef">for</span> i <span style="color:#f92672">in</span> range(<span style="color:#ae81ff">1</span>, max_width <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>):
        <span style="color:#66d9ef">for</span> j <span style="color:#f92672">in</span> range(i, max_length <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>):
            diff <span style="color:#f92672">=</span> abs(i<span style="color:#f92672">*</span>(i<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>)<span style="color:#f92672">*</span>j<span style="color:#f92672">*</span>(j<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>)<span style="color:#f92672">/</span><span style="color:#ae81ff">4</span> <span style="color:#f92672">-</span> target)
            <span style="color:#66d9ef">if</span> diff <span style="color:#f92672">&lt;</span> diff_min:
                area, diff_min <span style="color:#f92672">=</span> i<span style="color:#f92672">*</span>j, diff
    
    <span style="color:#66d9ef">return</span> area
</code></pre></div><p>The result we desire is:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#f92672">&gt;&gt;&gt;</span> counting(<span style="color:#ae81ff">2000000</span>)
<span style="color:#ae81ff">2772</span>
</code></pre></div><p>Therefore, although there exists no rectangular grid that contains exactly two million rectangles, the area of the grid with the nearest solution is equal to 2772.</p>

  </div>
  

<div class="navigation navigation-single">
    
    <a href="/posts/euler-project-problem-31/" class="navigation-prev">
      <i aria-hidden="true" class="fa fa-chevron-left"></i>
      <span class="navigation-tittle">Euler Project Problem 31 using Python</span>
    </a>
    
    
    <a href="/posts/malaria-visualization/" class="navigation-next">
      <span class="navigation-tittle">Malaria Visualization</span>
      <i aria-hidden="true" class="fa fa-chevron-right"></i>
    </a>
    
</div>


  

  
    


</article>


        </div>
        
    

<script defer src="https://use.fontawesome.com/releases/v5.11.2/js/all.js" integrity="sha384-b3ua1l97aVGAPEIe48b4TC60WUQbQaGi2jqAWM90y0OZXZeyaTCWtBTKtjW2GXG1" crossorigin="anonymous"></script>


    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.13.1/highlight.min.js"></script>
        
    <script type="text/javascript">
        
        hljs.initHighlightingOnLoad();
    </script>
    



    



    </body>
</html>
